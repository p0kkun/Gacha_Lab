# リッチメニュー8個ボタン実装方法

## 制約事項

**リッチメニューは最大6個のボタンまで配置可能です。**

8個のボタンを実装するには、以下の方法があります。

---

## 方法1: 6個に減らす（推奨）⭐

### 8個から6個への統合案

**上段（3個）：**
1. ガチャを引く
2. 抽選履歴
3. 友達を招待

**下段（3個）：**
4. マイページ
5. 設定
6. ヘルプ

**統合案：**
- 重要度の低い2個のボタンを削除
- または、機能を統合（例：「設定」と「ヘルプ」を1つに）

### リッチメニュー画像サイズ

- **通常メニュー（2行×3列）**: 2500px × 1686px
- 上段3個、下段3個の配置

---

## 方法2: 2つのリッチメニューを作成

### メインメニュー（6個）

**通常メニュー（2行×3列）:**
- 上段: ガチャ、抽選履歴、友達を招待
- 下段: マイページ、設定、ヘルプ

### サブメニュー（2個）

**コンパクトメニュー（1行×2列）:**
- メニュー7、メニュー8

**切り替え方法：**
- メインメニューに「もっと見る」ボタンを追加
- そのボタンでサブメニューに切り替え

**注意：**
- 同時に公開できるリッチメニューは1つまで
- ユーザーが手動で切り替える必要がある

---

## 方法3: リッチメニュー（6個）+ LIFFアプリ内メニュー（残り2個）

### 実装方法

1. **リッチメニュー（6個）**
   - LINE公式アカウントのトーク画面下部に表示
   - 主要な6個の機能を配置

2. **LIFFアプリ内メニュー（残り2個）**
   - LIFFアプリが開かれた時に表示
   - リッチメニューにない機能を配置

**メリット：**
- リッチメニューで主要機能にアクセス
- アプリ内で詳細なメニューを表示可能

---

## 推奨実装：6個のリッチメニュー

### ボタン配置案

**上段（3個）：**
1. **ガチャを引く** → `https://liff.line.me/YOUR_LIFF_ID?action=gacha`
2. **抽選履歴** → `https://liff.line.me/YOUR_LIFF_ID?action=history`
3. **友達を招待** → `https://liff.line.me/YOUR_LIFF_ID?action=referral`

**下段（3個）：**
4. **マイページ** → `https://liff.line.me/YOUR_LIFF_ID?action=mypage`
5. **設定** → `https://liff.line.me/YOUR_LIFF_ID?action=settings`
6. **ヘルプ** → `https://liff.line.me/YOUR_LIFF_ID?action=help`

### リッチメニュー画像のデザイン

**推奨レイアウト：**
```
┌─────────┬─────────┬─────────┐
│ ガチャ   │ 履歴     │ 招待     │
├─────────┼─────────┼─────────┤
│ マイページ│ 設定     │ ヘルプ   │
└─────────┴─────────┴─────────┘
```

**画像サイズ：** 2500px × 1686px

---

## 実装手順

### 1. リッチメニュー画像の作成

**必要なツール：**
- 画像編集ソフト（Photoshop、Figma、Canvaなど）
- または、LINE Creative Lab（無料）

**デザインのポイント：**
- 各ボタンエリアを明確に区切る
- アイコンとテキストを配置
- 視認性の高い色を使用

### 2. LINE Official Account Managerで設定

1. 「リッチメニュー」→「新規作成」
2. メニュータイプ: **通常メニュー**を選択
3. 画像をアップロード
4. 各エリアにアクションを設定：
   - **タイプ**: URIアクション
   - **URI**: LIFFアプリのURL（パラメータ付き）
   - **ラベル**: ボタン名

### 3. アクション設定例

**ボタン1（ガチャを引く）:**
- **エリア**: 左上（x: 0, y: 0, width: 833, height: 843）
- **URI**: `https://liff.line.me/YOUR_LIFF_ID?action=gacha`
- **ラベル**: ガチャを引く

**ボタン2（抽選履歴）:**
- **エリア**: 中央上（x: 833, y: 0, width: 833, height: 843）
- **URI**: `https://liff.line.me/YOUR_LIFF_ID?action=history`
- **ラベル**: 抽選履歴

**ボタン3（友達を招待）:**
- **エリア**: 右上（x: 1666, y: 0, width: 834, height: 843）
- **URI**: `https://liff.line.me/YOUR_LIFF_ID?action=referral`
- **ラベル**: 友達を招待

**ボタン4（マイページ）:**
- **エリア**: 左下（x: 0, y: 843, width: 833, height: 843）
- **URI**: `https://liff.line.me/YOUR_LIFF_ID?action=mypage`
- **ラベル**: マイページ

**ボタン5（設定）:**
- **エリア**: 中央下（x: 833, y: 843, width: 833, height: 843）
- **URI**: `https://liff.line.me/YOUR_LIFF_ID?action=settings`
- **ラベル**: 設定

**ボタン6（ヘルプ）:**
- **エリア**: 右下（x: 1666, y: 843, width: 834, height: 843）
- **URI**: `https://liff.line.me/YOUR_LIFF_ID?action=help`
- **ラベル**: ヘルプ

### 4. LIFFアプリ側でURLパラメータを処理

```typescript
// app/page.tsx
'use client';

import { useSearchParams } from 'next/navigation';
import { useEffect } from 'react';

export default function Home() {
  const searchParams = useSearchParams();
  const [isGachaModalOpen, setIsGachaModalOpen] = useState(false);
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  useEffect(() => {
    const action = searchParams.get('action');
    
    switch (action) {
      case 'gacha':
        setIsGachaModalOpen(true);
        break;
      case 'history':
        // 抽選履歴ページに遷移
        // router.push('/history');
        break;
      case 'referral':
        // 友達招待ページに遷移
        // router.push('/referral');
        break;
      case 'mypage':
        // マイページに遷移
        // router.push('/mypage');
        break;
      case 'settings':
        // 設定ページに遷移
        // router.push('/settings');
        break;
      case 'help':
        // ヘルプページに遷移
        // router.push('/help');
        break;
    }
  }, [searchParams]);

  // ... 既存のコード
}
```

---

## 8個のボタンが必要な場合の対応

### オプション1: 重要度で6個に絞る

最も重要な6個の機能を選ぶ

### オプション2: 2つのリッチメニューを切り替え

- メインメニュー（6個）
- サブメニュー（2個）
- ユーザーが手動で切り替え

### オプション3: リッチメニュー（6個）+ アプリ内メニュー（2個）

- リッチメニューで主要機能
- アプリ内で詳細メニュー

---

## まとめ

**推奨：6個のリッチメニュー**

1. リッチメニューは最大6個まで
2. 8個のボタンが必要な場合は、重要度で6個に絞る
3. リッチメニューからLIFFアプリを開き、URLパラメータで機能にアクセス
4. 残りの機能はアプリ内メニューで提供

これにより、ユーザーはリッチメニューから直接主要機能にアクセスでき、アプリ内でも詳細なメニューを利用できます。




