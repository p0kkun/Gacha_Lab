# プロジェクトセットアップ手順

## 1. Next.js プロジェクト作成

### 前提条件

- Node.js 20 以上がインストールされていること
- npm または yarn がインストールされていること

### プロジェクト作成

```powershell
# プロジェクトディレクトリに移動
cd "YOUR_PROJECT_PATH\Gacha_Lab"

# Next.jsプロジェクトを作成（appディレクトリに作成）
npx create-next-app@latest app --typescript --tailwind --app --no-src-dir --import-alias "@/*"
```

### プロジェクト構成

```
Gacha_Lab/
├── app/                    # Next.jsアプリケーション
│   ├── app/                # App Router
│   │   ├── api/            # API Routes
│   │   ├── layout.tsx      # ルートレイアウト
│   │   └── page.tsx        # メインページ
│   ├── components/         # Reactコンポーネント
│   ├── lib/                # ユーティリティ
│   └── public/             # 静的ファイル
└── docs/                   # ドキュメント
```

## 2. 依存関係のインストール

### 必要なパッケージ

```powershell
cd app
npm install @line/liff
```

### インストール済みパッケージ

- `next`: Next.js フレームワーク
- `react`: React ライブラリ
- `react-dom`: React DOM
- `@line/liff`: LINE LIFF SDK
- `typescript`: TypeScript
- `tailwindcss`: Tailwind CSS

## 3. 環境変数の設定

### .env.local ファイルの作成

プロジェクトルート（`app/`ディレクトリ）に`.env.local`ファイルを作成：

```env
# LIFF設定
NEXT_PUBLIC_LIFF_ID=YOUR_LIFF_ID
NEXT_PUBLIC_LIFF_URL=https://miniapp.line.me/YOUR_LIFF_ID

# Stripe設定（テストモード、後で設定）
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxx
# STRIPE_SECRET_KEY=sk_test_xxxxxxxxxxxxx

# データベース設定（後で設定）
# DATABASE_URL=postgresql://user:password@localhost:5432/gacha_lab
```

**注意**: `YOUR_LIFF_ID`を実際の LIFF ID に置き換えてください。

**注意**: `NEXT_PUBLIC_`プレフィックスが必要です（クライアント側で使用するため）

**Stripe設定**: [10_Stripe決済設定.md](./10_Stripe決済設定.md) を参照してください。

### .gitignore の確認

`.env.local`が`.gitignore`に含まれていることを確認：

```
.env.local
.env*.local
```

## 4. プロジェクト構成の確認

### ディレクトリ構造

```
app/
├── app/
│   ├── api/
│   │   └── gacha/
│   │       └── route.ts      # ガチャ抽選API
│   ├── layout.tsx            # ルートレイアウト
│   └── page.tsx              # メインページ
├── components/
│   ├── GachaModal.tsx        # 全画面ガチャモーダル
│   ├── GachaMenu.tsx         # 左側メニュー
│   ├── GachaContent.tsx      # 右側メインコンテンツ
│   └── VideoPlayer.tsx       # 動画再生コンポーネント
├── lib/
│   └── liff.ts               # LIFF SDK ラッパー
├── public/
│   └── videos/               # 動画ファイル配置ディレクトリ
│       └── item1.mp4         # サンプル動画
├── .env.local                # 環境変数（.gitignoreに含まれる）
├── package.json
└── tsconfig.json
```

## 5. 開発サーバーの起動

```powershell
cd app
npm run dev
```

開発サーバーが `http://localhost:3000` で起動します。

ブラウザで `http://localhost:3000` にアクセスして、Next.js のデフォルトページが表示されることを確認してください。

## 確認項目

- [ ] Next.js プロジェクトが作成された
- [ ] 依存関係がインストールされた
- [ ] `.env.local`ファイルが作成され、LIFF ID が設定された
- [ ] 開発サーバーが起動し、`http://localhost:3000`でアクセスできる

## 次のステップ

- [04\_機能実装.md](./04_機能実装.md) に進む
